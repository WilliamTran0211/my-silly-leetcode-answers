from collections import defaultdict
from typing import List


class Solution:
    def findAllPeople(
        self, n: int, meetings: List[List[int]], firstPerson: int
    ) -> List[int]:
        known = set()
        known.add(0)
        known.add(firstPerson)

        grp_time = defaultdict(list)

        for x, y, time in meetings:
            grp_time[time].append((x, y))

        grp_time = dict(sorted(grp_time.items(), key=lambda item: item[0]))

        for time, grp in grp_time.items():
            adj = defaultdict(list)

            for p1, p2 in grp:
                adj[p1].append(p2)
                adj[p2].append(p1)

            visited = set()

            def dfs(u):
                visited.add(u)
                cur_comp.add(u)

                for v in adj[u]:
                    if v in visited:
                        continue
                    dfs(v)

            for u in adj:
                if u not in visited:
                    cur_comp = set()
                    dfs(u)
                    if cur_comp.intersection(known):
                        known.update(cur_comp)
                        
        return list(known)


print(
    Solution().findAllPeople(
        n=200,
        meetings=[
            [0, 57, 2102],
            [193, 180, 2117],
            [194, 21, 2126],
            [159, 153, 2125],
            [164, 16, 2124],
            [178, 113, 2125],
            [133, 136, 2116],
            [124, 7, 2145],
            [0, 146, 2102],
            [180, 75, 2111],
            [128, 187, 2150],
            [116, 79, 2145],
            [131, 155, 2130],
            [3, 72, 2125],
            [178, 147, 2142],
            [62, 93, 2147],
            [75, 30, 2112],
            [154, 22, 2139],
            [29, 189, 2145],
            [5, 78, 2121],
            [85, 151, 2136],
            [101, 24, 2114],
            [58, 124, 2131],
            [20, 146, 2108],
            [42, 0, 2102],
            [126, 63, 2141],
            [167, 11, 2122],
            [15, 127, 2125],
            [155, 53, 2107],
            [134, 1, 2149],
            [139, 88, 2156],
            [145, 6, 2154],
            [37, 86, 2136],
            [164, 147, 2124],
            [99, 24, 2140],
            [181, 147, 2113],
            [86, 0, 2104],
            [30, 29, 2117],
            [55, 64, 2122],
            [25, 146, 2125],
            [170, 9, 2105],
            [137, 150, 2117],
            [92, 156, 2135],
            [143, 185, 2155],
            [79, 5, 2133],
            [153, 9, 2102],
            [197, 58, 2108],
            [167, 90, 2150],
            [79, 140, 2127],
            [48, 179, 2121],
            [149, 73, 2149],
            [177, 141, 2152],
            [102, 48, 2144],
            [93, 186, 2153],
            [58, 160, 2132],
            [58, 34, 2128],
            [146, 89, 2108],
            [165, 153, 2153],
            [52, 101, 2144],
            [26, 54, 2137],
            [78, 86, 2124],
            [147, 192, 2156],
            [11, 189, 2141],
            [102, 187, 2115],
            [104, 80, 2103],
            [153, 35, 2149],
            [101, 138, 2125],
            [101, 94, 2130],
            [101, 80, 2106],
            [5, 30, 2134],
            [159, 109, 2127],
            [53, 10, 2124],
            [146, 155, 2106],
            [26, 191, 2137],
            [159, 167, 2140],
            [169, 168, 2128],
            [141, 159, 2149],
            [108, 120, 2107],
            [53, 158, 2109],
            [193, 74, 2144],
            [78, 4, 2104],
            [156, 23, 2146],
            [198, 54, 2124],
            [52, 42, 2108],
            [19, 167, 2130],
            [180, 104, 2110],
            [147, 0, 2114],
            [24, 86, 2109],
            [57, 194, 2106],
            [68, 147, 2141],
            [103, 180, 2110],
            [169, 74, 2134],
            [79, 72, 2139],
            [22, 187, 2149],
            [48, 34, 2119],
            [194, 22, 2116],
            [146, 35, 2103],
            [20, 55, 2123],
            [197, 24, 2110],
            [6, 149, 2129],
            [42, 166, 2137],
            [158, 146, 2135],
            [118, 26, 2148],
            [127, 74, 2122],
            [178, 127, 2108],
            [20, 137, 2108],
            [61, 140, 2110],
            [194, 68, 2110],
            [104, 115, 2109],
            [116, 197, 2120],
            [115, 111, 2114],
            [111, 104, 2124],
            [164, 59, 2149],
            [8, 147, 2143],
            [79, 74, 2129],
            [159, 187, 2117],
            [48, 133, 2118],
            [54, 92, 2137],
            [127, 88, 2101],
            [177, 25, 2138],
            [167, 6, 2118],
            [64, 101, 2122],
            [7, 104, 2148],
            [92, 155, 2125],
            [54, 113, 2143],
            [30, 35, 2135],
            [195, 101, 2109],
            [62, 86, 2147],
            [0, 80, 2101],
            [22, 101, 2135],
            [198, 4, 2110],
            [9, 0, 2100],
            [63, 58, 2155],
            [0, 78, 2103],
            [191, 54, 2142],
            [48, 63, 2144],
            [167, 41, 2113],
            [108, 1, 2129],
            [113, 149, 2149],
            [79, 9, 2157],
            [88, 181, 2100],
            [24, 7, 2125],
            [14, 8, 2157],
            [73, 68, 2132],
            [184, 89, 2129],
            [35, 169, 2142],
            [7, 159, 2150],
            [63, 167, 2124],
            [25, 115, 2115],
            [184, 164, 2153],
            [16, 180, 2151],
            [79, 42, 2138],
            [153, 188, 2110],
            [52, 169, 2115],
            [198, 184, 2120],
            [154, 195, 2144],
            [102, 23, 2125],
            [57, 23, 2144],
            [8, 80, 2119],
            [2, 156, 2151],
            [7, 0, 2107],
            [41, 78, 2107],
            [104, 24, 2130],
            [78, 77, 2140],
            [6, 25, 2123],
            [5, 74, 2153],
            [24, 6, 2124],
            [76, 153, 2125],
            [46, 132, 2145],
            [3, 85, 2114],
            [124, 143, 2149],
            [49, 48, 2140],
            [38, 127, 2141],
            [63, 79, 2124],
            [61, 181, 2106],
            [195, 188, 2154],
            [147, 188, 2146],
            [7, 63, 2149],
            [105, 170, 2131],
            [153, 167, 2108],
            [143, 57, 2149],
            [136, 140, 2112],
            [7, 64, 2150],
            [104, 169, 2114],
            [158, 9, 2142],
            [146, 3, 2110],
            [132, 197, 2124],
            [155, 89, 2125],
            [96, 197, 2152],
            [102, 188, 2111],
            [108, 104, 2103],
            [197, 120, 2108],
            [9, 153, 2105],
            [108, 93, 2122],
            [20, 101, 2126],
            [85, 4, 2133],
            [9, 147, 2115],
            [170, 193, 2122],
            [159, 133, 2125],
            [147, 167, 2114],
        ],
        firstPerson=88,
    )
)
